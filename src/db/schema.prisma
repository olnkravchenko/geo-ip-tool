generator client {
    provider        = "prisma-client-js"
    previewFeatures = ["prismaSchemaFolder", "driverAdapters"]
}

datasource db {
    provider = "postgresql"
    url      = env("DB_URL")
}

model GeoIP {
    id        String  @id @default(uuid())
}

model Country {
    id      String   @id @default(uuid())
    name    String   @db.VarChar(100)
    isoCode String   @db.VarChar(2)
    regions Region[]
    @@unique([isoCode])
}

model Region {
    id        String  @id @default(uuid())
    name      String  @db.VarChar(100)
    code      String? @db.VarChar(10)
    countryId String
    country Country @relation(fields: [countryId], references: [id])

    @@unique([countryId, name])
    @@index([countryId])
}
